<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>IoT Bit – Visor de Datos</title>

<style>
body {
  background: #e9f0f7;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
}

.card {
  background: #ffffff;
  padding: 20px;
  border-radius: 12px;
  max-width: 500px;
  margin: 0 auto;
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
  color: #1d3557;
}

.stat {
  background: #ffffff;
  border: 2px solid #d2e3f1;
  border-radius: 10px;
}

.stat-label {
  color: #457b9d;
}


  .stat-label {
    font-size: 12px;
    color: #444;
  }

  .stat-value {
    font-size: 22px;
    margin-top: 5px;
  }

  #timestamp {
    margin-top: 15px;
    text-align: center;
    font-size: 14px;
    color: #333;
  }
</style>
</head>

<body>

<div class="card">
  <h2>Última lectura — Canal ThingSpeak 3160844</h2>

  <!-- Datos -->
  <div id="values"></div>

  <!-- Fecha y hora -->
  <div id="timestamp"></div>

  <!-- Error -->
  <div id="errorBox"
       style="display:none;background:#fee2e2;color:#991b1b;padding:12px;margin-top:16px;
       border-radius:8px;text-align:center;">
  </div>
</div>

<!-- TU SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", () => {

  const channelId = 3160844;
  const fields = [1,2,3];

  // Función para asegurar que exista el contenedor de error
  function ensureErrorBox() {
    let box = document.getElementById("errorBox");
    if (!box) {
      box = document.createElement("div");
      box.id = "errorBox";
      box.style.display = "none";
      box.style.background = "#fee2e2";
      box.style.color = "#991b1b";
      box.style.padding = "12px";
      box.style.marginTop = "16px";
      box.style.borderRadius = "8px";
      box.style.textAlign = "center";
      document.querySelector(".card").appendChild(box);
    }
    return box;
  }

  // Guardar última lectura válida
  function saveLastGood(entry) {
    try {
      localStorage.setItem("lastGoodReading", JSON.stringify(entry));
    } catch {}
  }

  // Cargar última lectura válida
  function loadLastGood() {
    try {
      const data = localStorage.getItem("lastG


</body>
</html>
